<!DOCTYPE html>
<html lang="es">
<cabeza>
<meta charset="UTF-8">
<title>Seguimiento de Contenedor</title>
<link rel="hoja de estilo" href=" https://unpkg.com/leaflet@1.9.3/dist/leaflet.css " />
<estilo>
cuerpo {
familia de fuentes: Arial, sans-serif;
margen: 0;
relleno: 0;
}

#mapa {
altura: 400px;
}

#información {
relleno: 20px;
}

mesa {
ancho: 100%;
colapso de frontera: colapso;
margen superior: 15px;
}

el, td {
borde: 1px sólido #ccc;
relleno: 8px;
}

el {
color de fondo: #f2f2f2;
}

entrada[tipo="texto"] {
relleno: 8px;
ancho: 300px;
}

botón {
relleno: 8px 15px;
cursor: puntero;
}
</estilo>
</cabeza>
<cuerpo>

<div id="información">
<h2>Seguimiento de Contenedor</h2>
<label for="blNumber">Número de BL:</label>
<input type="text" id="blNumber" placeholder="Ej: MEDUQT871264">
<button onclick="mostrarDatosSimulados()">Buscar</button>

<table id="tablaEventos">
<cabeza>
<tr>
Puerto y Eventos
Fecha
</tr>
</cabeza>
<tbody id="puertoTiempos">
</tbody>
</tabla>
</div>

<div id="mapa"></div>

<script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js "></script>
<guión>
constante map = L.map('mapa').setView([20, 0], 2);
L.tileLayer('https://{s} .tile.openstreetmap.org/ {z}/{x}/{y}.png ', {
atribución: '&copy; colaboradores de OpenStreetMap'
}).addTo(mapa);

function mostrarDatosSimulados() {
const bl = document.getElementById("blNumber").value.trim();

si (bl === "MEDUQT871264") {
const datosRuta = [
{ puerto: "Qingdao, CN", evento: "Empty to Shipper", fecha: "10 Feb 2025 00:00", coords: [36.0671, 120.3826] },
{ puerto: "Qingdao, CN", evento: "Exportación recibida en CY", fecha: "16 Feb 2025 00:00", coords: [36.0671, 120.3826] },
{ puerto: "Qingdao, CN", evento: "Export Loaded on Vessel", fecha: "17 Feb 2025 00:00", coords: [36.0671, 120.3826] },
{ puerto: "Busan, KR", evento: "Full Transshipment Discharged", fecha: "22 Feb 2025 00:00", coords: [35.1796, 129.0756] },
{ puerto: "Busan, KR", evento: "Transbordo completo", fecha: "23 feb 2025 00:00", coordenadas: [35.1796, 129.0756] },
{ puerto: "Buenaventura, CO", evento: "Importación Descargada de Buque", fecha: "25 Mar 2025 00:00", coords: [3.8801, -77.0312] },
{ puerto: "Buenaventura, CO", evento: "Importar a consignatario", fecha: "4 Abr 2025 00:00", coords: [3.8801, -77.0312] },
{ puerto: "Buenaventura, CO", evento: "Vacío recibido en CY", fecha: "7 Abr 2025 00:00", coords: [3.8801, -77.0312] },
];

document.getElementById("puertoTiempos").innerHTML = "";

mapa.eachLayer(capa => {
si (capa instancia de L.Marcador || capa instancia de L.Polilínea) {
mapa.removeLayer(capa);
}
});

L.tileLayer('https://{s} .tile.openstreetmap.org/ {z}/{x}/{y}.png ', {
atribución: '&copy; colaboradores de OpenStreetMap'
}).addTo(mapa);

sea rutaCoordenadas = [];

datosRuta.forEach(dato => {
L.marcador(dato.coords).addTo(mapa)
.bindPopup(`<strong>${dato.puerto}</strong><br>${dato.evento}<br>${dato.fecha}`);
const fila = `<tr><td>${dato.puerto} - ${dato.evento}</td><td>${dato.fecha}</td></tr>`;
document.getElementById("puertoTiempos").innerHTML += fila;
rutaCoordenadas.push(dato.coords);
});

L.polyline(rutaCoordenadas, { color: 'azul' }).addTo(mapa);
mapa.setView(rutaCoordenadas[0], 3);
} demás {
alert("No hay datos disponibles para este BL.");
}
}
</script>

</cuerpo>
</html>

